<br/>

## MillenniumSWDEV / 밀레니엄 소프트웨어 개발부

<br>

협업과, 개발의 즐거움을 추구하는 조 입니다! 

<br/>


## 기획의도

미래를 위한 투자를 중요시 하는 풍조가 짙어짐에 따라 금융상품의 수요도 증가하고 있는 지금. <br/>
다양한 금융상품들 중에서 어떤 상품을 골라야 할 지 고민중인 당신을 위해 준비했습니다!
<br/>
<br/>
온라인으로 손쉽게 금융 상품을 추천받을 수 있는 사이트입니다. <br/>
마음에 드는 상품을 자신의 장바구니에 넣어 추가하고, 삭제할 수 있습니다. 
<br/>
<br/>

금융 이상형 월드컵 테스트와 소비성향 테스트도 진행해보세요! 😉

<br/>



## 진행기간

2023년 05월 17일 ~ 2023년 05월 25일 (총 7일)

<br/>

## 참여 인원 및 업무분담


|이름|역할|프론트엔드|백엔드|
|------|---|---|---|
|이채련|팀장|메인페이지<br>게시판(수정, 삭제, 추가, 조회)<br>온라인 상품, 상품 디테일<br>금융 심리 테스트<br>장바구니, 마이페이지, <br>로그인, 회원가입<br>컴포넌트 및 페이지 구현||
|신기정|팀원|카카오맵 api 연동<br>금융 심리 테스트 로직, 컴포넌트와 뷰 구현(금사빠, 소비성향테스트)<br>온라인 상품 디테일 컴포넌트 구현<br>장바구니, 디테일컴포넌트와 연동<br>vuex로 전역에서 사용되는 데이터 상태관리<br>서버 api와 통신하는 로직 구현|환율 api 프론트와 연동|
|허 재|팀원|게시판 수정, 삭제, 추가, 조회 뷰 및 댓글 구현<br>장바구니 기능<br>인증 및 권한 설정<br>회원정보수정 페이지 작성 및 연동<br>로그인, 회원가입 페이지 작성 및 연동|금융상품 api, 환율 api 프론트와 연동<br>데이터 모델 및 관계 작성<br>인증 및 권한 기능 구현<br>서버 API 작성(명세 기능 대부분)|

<br>

## 사용 기술 스택 

## FRONT

### Framework

- Vue - 프레임워크

### State Management

- Vuex - 전역 상태 관리 라이브러리

### Style

- Vue Bootstrap
  
<br/>

## BACK

### Web Server

- Django REST Framework

### DB

- sqlite

<br/>

## TOOL

- Postman - api 테스팅 툴
- Figma - 디자인 툴

<br/>

## CONVENTION + TOOL 

- Eslint + Prettier
- Git Hub
- Notion

<br>

## 서비스 모델 ERD(Entity Relationship Diagram)
<img width="1263" alt="KakaoTalk_20230526_011054987" src="https://github.com/MillenniumSWDEV/final_pjt/assets/89028068/e943aef1-df6b-4648-a5fc-eca8b0603705">


<br>


## 명세와 비교해서 실제 서비스 구현 정도 

- 메인페이지
  - 환율정보를 불러와 국가 선택을 해서 양방향 환전이 가능하도록 구현하였습니다
  - 이미지 슬라이드를 통해 저희 조의 추천 알고리즘인 금융 상품 심리 테스트를 홍보할 수 있도록 하였습니다
  - 카카오맵 api 를 사용해 주변 은행 검색 및 전국구 은행 검색이 가능하도록 하였습니다.
  - 또한 지도 검색을 하고 난 후 검색지에 대한 은행 이름정보를 확인해볼 수 있습니다.
  
<br>

- 게시판 
  - 조회, 추가, 수정, 삭제 기능을 구현하였습니다. 
  - 댓글 기능 구현하였습니다. 
  - 로그인한 사용자에게만 추가할 수 있도록 구현하였습니다. 
  - 인증 권한이 있는 사용자에게만 게시글과 댓글을 수정하고, 삭제할 수 있게 하였습니다. 
  - 회원 권한에 따른 동작을 다르게 하도록 구현하였습니다

<br>

- 금융 상품 api를 활용한 조회 및 추천기능
  - 예적금 상품을 볼 수 있도록 하였습니다.
  - 예적금 상품의 상세페이지를 구현해 사용자에게 자세한 정보를 제공하였습니다
  - 장바구니 기능을 구현하여 사용자가 원하는 상품을 찜할 수 있도록 하였습니다. 
  - DB에 이미 있는 데이터는 중복 저장되지 않게 구현하였습니다. 

<br>

- 로그인, 회원가입
  - 로그인과 회원가입 기능을 구현하였습니다
  - 로그인, 회원가입시 프론트에서 유효성검사를 통해 사용자에게 올바른 데이터를 입력할 수 있도록 하였습니다. 
  - 마이페이지를 통해 회원 정보를 수정할 수 있게 하였습니다. 

<br>

- 금.사.빠(금융과 사랑에 빠지다)
  1. 이상형 월드컵
  - 로직은 다음과 같습니다.
    - 예금 혹은 적금 버튼을 누르면 local storage에 저장되어 있는 각 상품들을 랜덤 정렬한 뒤 32개가 되도록 배열을 잘라 products에 할당해줍니다.
    - 시작 버튼을 누르면 products 내부에 있는 상품 2개를 pop한 뒤 선택지가 될 TournamentChoice 컴포넌트에 prop으로 내려주고, 적절한 정보를 표시해줍니다.
    - 어느 한 쪽이 선택되면 선택 된 상품을 next_round 배열에 집어넣습니다.
    - products가 빈 배열이 되고, 선택이 완료되어 요소가 비게 되면 watch 요소가 이를 감지하여 next_round에 저장되어 있던 배열을 products에 할당해 줍니다.
    - 이를 반복하여 하나의 상품만 남게 되면 watch요소가 이를 감지하여 우승 상품을 가려내고 필요한 정보를 DetailProducts 컴포넌트에 prop하여 보여줍니다.
    - 마지막으로 중간에 시작 버튼을 눌러도 마음대로 넘어가는 것을 방지하기 위해 조건문으로 상황을 한정거나, 매개변수를 통해 유효성을 검증하는 등의 요소를 추가하여 사용자의 행동을 제한했습니다.


  <br>


  1. 소비 성향 테스트
  - 15개의 문제를 통해 자신의 소비 습관을 알아가는 테스트입니다.
  - 유형은 총 네 가지가 있으며, 특징은 다음과 같습니다.
      - 계획성 있는 소비를 하며, 가성비를 중요시하는 개미
      - 다소 충동적이고 가성비를 중요시 하는 소학행
      - 계획성이 있는 소비를 하며 씀씀이가 큰 정승
      - 다소 충동적이며 씀씀이가 큰 베짱이
  - 충동적인 소비를 하는 경향이 있는 경우 차근차근 소비 습관을 기르는 것이 중요하다 생각했기 때문에 저축 상한과 저축 기간이 짧고 이율이 높은 적금을 추천해주며, 계획성 있는 소비에 익숙해진 유형의 경우 저축기간이 다소 길더라도 저축 상한 금액이 높고 이율이 높은 적금 상품을 추천해줍니다.
  - 로직은 다음과 같습니다.
    - GBTITest 컴포넌트에서 GBTIQuestion 컴포넌트로 스테이지 정보를 prop 해줍니다.
    - GBTIQuestion 컴포넌트에서는 prop받은 스테이지 정보를 인덱스로 하는 질문을 띄워줍니다.
    - 만약 유저가 정답을 선택하고 다음 버튼을 누르면 질문에 할당되어 있는 문자열이 emit되고, GBTITest 내부의 함수를 통해 충동성과 씀씀이의 값을 조절합니다.
    - 모든 질문에 답을 마치면 GBTIQuestion컴포넌트가 사라지고 GBTIResult 컴포넌트에 점수 오브젝트를 prop해주고 받은 점수에 따라 유형을 보여줍니다.
    - 또한 유형 오브젝트에 연결되어 있는 추천 금융상품을 DetailProducts 컴포넌트를 통해 보여줍니다.

<br>


## 시행착오 및 해결했던 방법

### 1. alluath사용시 에러
- [시행착오] 'int' object is not subscriptable 회원가입 시 age필드를 정수형으로 정했는데, allauth내부적으로 필드별 입력값을 인덱스 슬라이싱을 거치고 있었다. 그래서 정수형으로 입력을 받으니까 에러가 났었다. 
- [해결방법] 메서드 오버라이딩을 통해서 입력값 문자열로 바꿔주어서 해결했다.




### 2. 권한 관련 세부설정
- [시행착오] views.py의 함수가 get과 post 메서드를 함께 처리할때에, post메서드에만 로그인 권한을 설정하고자 하였다. 그러나 데코레이터를 이용하면 함수 전체에 권한이 걸리므로 원하는대로 동작하지 않았다.
- [헤결방안] 클래스를 이용해 views.py를 구성하는 방법인 CBV를 알게되었고, 클래스로 views.py를 구성한 후 클래스변수로 권한범위를 선언한 뒤, 각 메서드 안에서 권한범위를 재설정할 수 있었다. 이를 통해 같은 url요청에 대해 메서드별로 다른 권한설정을 할 수 있었다.

<br>

## 기술적으로 아쉬웠던 부분과 향후 공부할 내용



### 1. 금리변화시 메일발송기능 도전과제
- 해당 도전과제는 메일발송 라이브러리를 이용해서 해결해야하는 과제였고, 실제로 많이 쓰이는 기능이므로 해보고 싶었으나 시간이 촉박하여 시도하지 못했다. 좀 더 추가적인 기능들을 구현지 못한 부분이 아쉽기도 하다.
### 2. OAuth라이브러리를 이용한 소셜로그인 기능 
- 소셜로그인 기능 또한 거의 모든 서비스에서 사용되는 기능이므로 구현 해보고 싶었으나 그러지 못해서 아쉬움이 남는다. dj-rest-auth공식문서에 여러가지 

### 3. 모든 상태를 vuex로 관리함
- 컴포넌트 분리를 했지만, 모든 상태를 vuex로 관리했기 때문에 다음에는 꼭 상태분리를 하고 컴포넌트도 잘게 쪼개보고 싶다! 

### 향후 공부하고자 하는 내용들
- 다양한 라이브러리들을 활용한 기능 구현들을 공부해보고 싶다. 앞서 말한 OAuth를 이용한 소셜로그인 기능 또는 메일발송 라이브러리를 활용한 기능들 또한 공부하고자 한다.
- 컴포넌트를 좀 더 재사용성이 높게 짜는 방법을 공부할 것이다. 


<br>
<br>

## 프로젝트 실행 시 필요한 env, 등등


- 밑의 코드 백엔드 .env 파일(back-server폴더 루트에 .env파일에 작성해주시면 됩니다ㅎㅎ!)
```
API_KEY=bac4f663e56a191a12174c9b8a2805b9
EXRATE_API_KEY=wYIfoG8ylT1yYHbxuFEA8Ecyc3mOUNav
```
- 온라인 금융 상품 데이터를 받아와야 하는데 버튼을 따로 구현하지 못했습니다
  - 백엔드 서버를 켜고 밑의 주소로 요청을 한번씩 날려주세욥
```
127.0.0.1:8000/finlife/save-deposit-products/ ( 예금 상품 api 요청 )
127.0.0.1:8000/finlife/save-saving-products/ ( 적금 상품 api 요청 )
```
